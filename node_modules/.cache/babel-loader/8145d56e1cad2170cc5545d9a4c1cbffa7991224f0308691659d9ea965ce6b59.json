{"ast":null,"code":"import{useState}from'react';import{useWorkoutsContext}from'../hooks/useWorkoutsContext';import{useAuthContext}from'../hooks/useAuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkoutForm=()=>{const{dispatch}=useWorkoutsContext();const{user}=useAuthContext();const[title,setTitle]=useState('');const[load,setLoad]=useState('');const[reps,setReps]=useState('');const[error,setError]=useState(null);const[emptyFields,setEmptyFields]=useState([]);const handleSubmit=async e=>{e.preventDefault();if(!user){setError('You must be logged in to add a workout');return;}const workout={title,load,reps};const response=await fetch('/api/workouts',{method:'POST',body:JSON.stringify(workout),headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});const json=await response.json();if(!response.ok){setError(json.error);setEmptyFields(json.emptyFields);}if(response.ok){setError(null);setTitle('');setLoad('');setReps('');setEmptyFields([]);dispatch({type:'CREATE_WORKOUT',payload:json});}};return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Workout\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Excersize Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:e=>setTitle(e.target.value),value:title,className:emptyFields.includes('title')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Load (in kg):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setLoad(e.target.value),value:load,className:emptyFields.includes('load')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Number of Reps:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:e=>setReps(e.target.value),value:reps,className:emptyFields.includes('reps')?'error':''}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Workout\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default WorkoutForm;","map":{"version":3,"names":["useState","useWorkoutsContext","useAuthContext","jsx","_jsx","jsxs","_jsxs","WorkoutForm","dispatch","user","title","setTitle","load","setLoad","reps","setReps","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","workout","response","fetch","method","body","JSON","stringify","headers","concat","token","json","ok","type","payload","className","onSubmit","children","onChange","target","value","includes"],"sources":["D:/MERN-Stack-Tutorial-lesson-2/WorkoutRoutine/frontend/src/components/workoutForm.js"],"sourcesContent":["import { useState } from 'react'\r\nimport { useWorkoutsContext } from '../hooks/useWorkoutsContext'\r\nimport { useAuthContext } from '../hooks/useAuthContext'\r\n\r\nconst WorkoutForm = () => {\r\n  const { dispatch } = useWorkoutsContext()\r\n  const { user } = useAuthContext()\r\n  \r\n  const [title, setTitle] = useState('')\r\n  const [load, setLoad] = useState('')\r\n  const [reps, setReps] = useState('')\r\n  const [error, setError] = useState(null)\r\n  const [emptyFields, setEmptyFields] = useState([])\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault()\r\n\r\n    if (!user) {\r\n      setError('You must be logged in to add a workout')\r\n      return\r\n    }\r\n\r\n    const workout = {title, load, reps}\r\n    \r\n    const response = await fetch('/api/workouts', {\r\n      method: 'POST',\r\n      body: JSON.stringify(workout),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${user.token}`\r\n      }\r\n    })\r\n    const json = await response.json()\r\n\r\n    if (!response.ok) {\r\n      setError(json.error)\r\n      setEmptyFields(json.emptyFields)\r\n    }\r\n    if (response.ok) {\r\n      setError(null)\r\n      setTitle('')\r\n      setLoad('')\r\n      setReps('')      \r\n      setEmptyFields([])\r\n      dispatch({type: 'CREATE_WORKOUT', payload: json})\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <form className=\"create\" onSubmit={handleSubmit}> \r\n      <h3>Add a New Workout</h3>\r\n\r\n      <label>Excersize Title:</label>\r\n      <input \r\n        type=\"text\" \r\n        onChange={(e) => setTitle(e.target.value)} \r\n        value={title}\r\n        className= {emptyFields.includes('title') ? 'error' : ''}\r\n      />\r\n\r\n      <label>Load (in kg):</label>\r\n      <input \r\n        type=\"number\" \r\n        onChange={(e) => setLoad(e.target.value)} \r\n        value={load}\r\n        className= {emptyFields.includes('load') ? 'error' : ''}\r\n      />\r\n\r\n      <label>Number of Reps:</label>\r\n      <input \r\n        type=\"number\" \r\n        onChange={(e) => setReps(e.target.value)} \r\n        value={reps} \r\n        className= {emptyFields.includes('reps') ? 'error' : ''}\r\n      />\r\n\r\n      <button>Add Workout</button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default WorkoutForm"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,kBAAkB,KAAQ,6BAA6B,CAChE,OAASC,cAAc,KAAQ,yBAAyB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACxB,KAAM,CAAEC,QAAS,CAAC,CAAGP,kBAAkB,CAAC,CAAC,CACzC,KAAM,CAAEQ,IAAK,CAAC,CAAGP,cAAc,CAAC,CAAC,CAEjC,KAAM,CAACQ,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACY,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACc,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CAElD,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,CAACb,IAAI,CAAE,CACTQ,QAAQ,CAAC,wCAAwC,CAAC,CAClD,OACF,CAEA,KAAM,CAAAM,OAAO,CAAG,CAACb,KAAK,CAAEE,IAAI,CAAEE,IAAI,CAAC,CAEnC,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,eAAe,CAAE,CAC5CC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACN,OAAO,CAAC,CAC7BO,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYtB,IAAI,CAACuB,KAAK,CACvC,CACF,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACS,IAAI,CAAC,CAAC,CAElC,GAAI,CAACT,QAAQ,CAACU,EAAE,CAAE,CAChBjB,QAAQ,CAACgB,IAAI,CAACjB,KAAK,CAAC,CACpBG,cAAc,CAACc,IAAI,CAACf,WAAW,CAAC,CAClC,CACA,GAAIM,QAAQ,CAACU,EAAE,CAAE,CACfjB,QAAQ,CAAC,IAAI,CAAC,CACdN,QAAQ,CAAC,EAAE,CAAC,CACZE,OAAO,CAAC,EAAE,CAAC,CACXE,OAAO,CAAC,EAAE,CAAC,CACXI,cAAc,CAAC,EAAE,CAAC,CAClBX,QAAQ,CAAC,CAAC2B,IAAI,CAAE,gBAAgB,CAAEC,OAAO,CAAEH,IAAI,CAAC,CAAC,CACnD,CAEF,CAAC,CAED,mBACE3B,KAAA,SAAM+B,SAAS,CAAC,QAAQ,CAACC,QAAQ,CAAElB,YAAa,CAAAmB,QAAA,eAC9CnC,IAAA,OAAAmC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAE1BnC,IAAA,UAAAmC,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BnC,IAAA,UACE+B,IAAI,CAAC,MAAM,CACXK,QAAQ,CAAGnB,CAAC,EAAKV,QAAQ,CAACU,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAE,CAC1CA,KAAK,CAAEhC,KAAM,CACb2B,SAAS,CAAGnB,WAAW,CAACyB,QAAQ,CAAC,OAAO,CAAC,CAAG,OAAO,CAAG,EAAG,CAC1D,CAAC,cAEFvC,IAAA,UAAAmC,QAAA,CAAO,eAAa,CAAO,CAAC,cAC5BnC,IAAA,UACE+B,IAAI,CAAC,QAAQ,CACbK,QAAQ,CAAGnB,CAAC,EAAKR,OAAO,CAACQ,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAE,CACzCA,KAAK,CAAE9B,IAAK,CACZyB,SAAS,CAAGnB,WAAW,CAACyB,QAAQ,CAAC,MAAM,CAAC,CAAG,OAAO,CAAG,EAAG,CACzD,CAAC,cAEFvC,IAAA,UAAAmC,QAAA,CAAO,iBAAe,CAAO,CAAC,cAC9BnC,IAAA,UACE+B,IAAI,CAAC,QAAQ,CACbK,QAAQ,CAAGnB,CAAC,EAAKN,OAAO,CAACM,CAAC,CAACoB,MAAM,CAACC,KAAK,CAAE,CACzCA,KAAK,CAAE5B,IAAK,CACZuB,SAAS,CAAGnB,WAAW,CAACyB,QAAQ,CAAC,MAAM,CAAC,CAAG,OAAO,CAAG,EAAG,CACzD,CAAC,cAEFvC,IAAA,WAAAmC,QAAA,CAAQ,aAAW,CAAQ,CAAC,CAC3BvB,KAAK,eAAIZ,IAAA,QAAKiC,SAAS,CAAC,OAAO,CAAAE,QAAA,CAAEvB,KAAK,CAAM,CAAC,EAC1C,CAAC,CAEX,CAAC,CAED,cAAe,CAAAT,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}